#!/bin/sh

run_step () {
  NAME=$1
  CMD=$2

  echo "▶ Running $NAME..."
  sh -c "$CMD"
  RESULT=$?

  if [ $RESULT -ne 0 ]; then
    echo "❌ $NAME failed. Push aborted."
    exit 1
  fi
}

run_step "lint" "pnpm run lint"
run_step "type check" "pnpm run check-types"
run_step "tests" "pnpm run test"
run_step "build" "pnpm run build"

echo "✅ All checks passed. Push allowed."
exit 0
